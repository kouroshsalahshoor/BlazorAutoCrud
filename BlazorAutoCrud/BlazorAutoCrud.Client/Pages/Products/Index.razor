@page "/products"
@inject IProductRepository _productService

<PageTitle>@_title</PageTitle>

<h3>@_title</h3>

@if (_isLoading)
{
    <p>loading...</p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Quantity</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in _items!)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>@item.Name</td>
                    <td>@item.Quantity</td>
                    <td></td>
                </tr>
            }
        </tbody>
    </table>
}


@code {
    private string _title = "Products";

    private List<Product>? _items = new();
    private bool _isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        _isLoading = true;
        _items!.Clear();
        var data = await _productService.Get();
        if (data is not null)
        {
            _items = data;
        }
        _isLoading = false;
    }
}
